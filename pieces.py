from colors import Color

class Piece:
  def __init__(self, matrices, color):
    assert len(matrices) == 4
    for m in matrices:
      assert len(m) == 4
      for row in m:
        assert len(row) == 4

    self.pos = 0
    self.matrices = matrices
    self.color = color
  
  @property
  def matrix(self):
    return self.matrices[self.pos]
  
  def rotate(self):
    self.pos = (self.pos + 1) % 4
  
  def rotate_backwards(self):
    self.pos = (self.pos + 3) % 4
  
  def reset_rotation(self):
    self.pos = 0

i = Piece(
  (
    (
      (0, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 1, 0, 0),
    ),
    (
      (0, 0, 0, 0),
      (1, 1, 1, 1),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 1, 0),
      (0, 0, 1, 0),
      (0, 0, 1, 0),
      (0, 0, 1, 0),
    ),
    (
      (0, 0, 0, 0),
      (0, 0, 0, 0),
      (1, 1, 1, 1),
      (0, 0, 0, 0),
    ),
  ),
  Color.DARK_CYAN
)

j = Piece(
  (
    (
      (0, 1, 0, 0),
      (0, 1, 0, 0),
      (1, 1, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (1, 0, 0, 0),
      (1, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 1, 0),
      (0, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 0, 0),
      (1, 1, 1, 0),
      (0, 0, 1, 0),
      (0, 0, 0, 0),
    ),
  ),
  Color.DARK_RED
)

l = Piece(
  (
    (
      (0, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 1, 1, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 0, 0),
      (1, 1, 1, 0),
      (1, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (1, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 1, 0),
      (1, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
  ),
  Color.DARK_BROWN
)

o = Piece(
  (
    (
      (0, 1, 1, 0),
      (0, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 1, 0),
      (0, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 1, 0),
      (0, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 1, 0),
      (0, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
  ),
  Color.DARK_MAGENTA
)

s = Piece(
  (
    (
      (0, 1, 1, 0),
      (1, 1, 0, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 0, 0),
      (0, 1, 1, 0),
      (0, 0, 1, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 0, 0),
      (0, 1, 1, 0),
      (1, 1, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (1, 0, 0, 0),
      (1, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 0, 0, 0),
    ),
  ),
  Color.DARK_GRAY
)

t = Piece(
  (
    (
      (0, 1, 0, 0),
      (1, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 0, 0),
      (0, 1, 1, 0),
      (0, 1, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 0, 0),
      (1, 1, 1, 0),
      (0, 1, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 0, 0),
      (1, 1, 0, 0),
      (0, 1, 0, 0),
      (0, 0, 0, 0),
    ),
  ),
  Color.DARK_GREEN
)

z = Piece(
  (
    (
      (1, 1, 0, 0),
      (0, 1, 1, 0),
      (0, 0, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 1, 0),
      (0, 1, 1, 0),
      (0, 1, 0, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 0, 0, 0),
      (1, 1, 0, 0),
      (0, 1, 1, 0),
      (0, 0, 0, 0),
    ),
    (
      (0, 1, 0, 0),
      (1, 1, 0, 0),
      (1, 0, 0, 0),
      (0, 0, 0, 0),
    )
  ),
  Color.DARK_BLUE
)

pieces = i, j, l, o, s, t, z